/* ==========================================================================
   sciagent – Web Chat UI Stylesheet
   Clean, modern design. Dark/light themes via data-theme attribute.
   Generic — branding is loaded dynamically from /api/config.
   ========================================================================== */

:root {
    --font-sans: 'Segoe UI', system-ui, -apple-system, sans-serif;
    --font-mono: 'Cascadia Code', 'Fira Code', 'JetBrains Mono', 'Consolas', monospace;
    --radius: 10px;
    --radius-sm: 6px;
    --transition: 0.2s ease;
    --header-h: 56px;
    --sidebar-w: 280px;
    --max-chat-w: 860px;
}

[data-theme="dark"] {
    --bg-primary: #0d1117;
    --bg-secondary: #161b22;
    --bg-tertiary: #21262d;
    --bg-input: #0d1117;
    --border: #30363d;
    --text-primary: #e6edf3;
    --text-secondary: #8b949e;
    --text-muted: #6e7681;
    --accent: #58a6ff;
    --accent-hover: #79c0ff;
    --user-bubble: #1f6feb;
    --user-bubble-text: #ffffff;
    --agent-bubble: #161b22;
    --agent-bubble-text: #e6edf3;
    --success: #3fb950;
    --warning: #d29922;
    --error: #f85149;
    --shadow: rgba(0,0,0,0.4);
    --thinking-bg: #1c2128;
}

[data-theme="light"] {
    --bg-primary: #ffffff;
    --bg-secondary: #f6f8fa;
    --bg-tertiary: #eaeef2;
    --bg-input: #ffffff;
    --border: #d0d7de;
    --text-primary: #1f2328;
    --text-secondary: #656d76;
    --text-muted: #8b949e;
    --accent: #0969da;
    --accent-hover: #0550ae;
    --user-bubble: #0969da;
    --user-bubble-text: #ffffff;
    --agent-bubble: #f6f8fa;
    --agent-bubble-text: #1f2328;
    --success: #1a7f37;
    --warning: #9a6700;
    --error: #cf222e;
    --shadow: rgba(0,0,0,0.1);
    --thinking-bg: #f0f3f6;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: var(--font-sans); font-size: 15px; line-height: 1.6; color: var(--text-primary); background: var(--bg-primary); overflow: hidden; }
a { color: var(--accent); text-decoration: none; }
a:hover { color: var(--accent-hover); }

.app-header { position: fixed; top: 0; left: 0; right: 0; height: var(--header-h); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; background: var(--bg-secondary); border-bottom: 1px solid var(--border); z-index: 100; }
.header-left { display: flex; align-items: center; gap: 14px; }
.logo { font-size: 1.25rem; font-weight: 700; display: flex; align-items: center; gap: 6px; }
.logo-icon { font-size: 1.4rem; }
.tagline { color: var(--text-secondary); font-size: 0.85rem; }
.header-right { display: flex; align-items: center; gap: 12px; }
.icon-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 6px; border-radius: var(--radius-sm); font-size: 1.1rem; display: flex; align-items: center; transition: background var(--transition), color var(--transition); }
.icon-btn:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.status-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--text-muted); transition: background var(--transition); }
.status-dot.connected { background: var(--success); }
.status-dot.error { background: var(--error); }

.app-main { display: flex; height: calc(100vh - var(--header-h)); margin-top: var(--header-h); }
.sidebar { width: var(--sidebar-w); min-width: var(--sidebar-w); background: var(--bg-secondary); border-right: 1px solid var(--border); padding: 16px; overflow-y: auto; transition: transform var(--transition); }
.sidebar.collapsed { transform: translateX(calc(-1 * var(--sidebar-w))); position: absolute; z-index: 50; height: calc(100vh - var(--header-h)); }
.sidebar-section { margin-bottom: 24px; }
.sidebar-section h3 { font-size: 0.85rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }

.sample-list { display: flex; flex-direction: column; gap: 4px; }
.sample-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 10px; border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem; color: var(--text-primary); border: 1px solid transparent; transition: background var(--transition), border-color var(--transition); }
.sample-item:hover { background: var(--bg-tertiary); border-color: var(--border); }

.upload-area { display: flex; align-items: center; justify-content: center; padding: 20px; border: 2px dashed var(--border); border-radius: var(--radius); cursor: pointer; text-align: center; transition: border-color var(--transition), background var(--transition); }
.upload-area:hover, .upload-area.dragover { border-color: var(--accent); background: rgba(88,166,255,0.05); }
.upload-text { color: var(--text-secondary); font-size: 0.85rem; line-height: 1.5; }
.upload-status { margin-top: 8px; font-size: 0.85rem; color: var(--text-secondary); }

.suggestions { display: flex; flex-wrap: wrap; gap: 6px; }
.suggestion-chip { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 20px; padding: 6px 14px; font-size: 0.8rem; color: var(--text-primary); cursor: pointer; transition: background var(--transition), border-color var(--transition); }
.suggestion-chip:hover { background: var(--accent); color: white; border-color: var(--accent); }

.chat-container { flex: 1; display: flex; flex-direction: column; max-width: var(--max-chat-w); margin: 0 auto; width: 100%; }
.chat-messages { flex: 1; overflow-y: auto; padding: 24px 20px; }
.welcome-message { text-align: center; padding: 60px 20px; }
.welcome-message h2 { font-size: 1.5rem; margin-bottom: 12px; }
.welcome-message p { color: var(--text-secondary); max-width: 480px; margin: 0 auto 8px; }
.muted { color: var(--text-muted); font-size: 0.85rem; }

.message { display: flex; gap: 12px; margin-bottom: 20px; }
.message-avatar { width: 32px; height: 32px; font-size: 1.2rem; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
.message-body { flex: 1; min-width: 0; line-height: 1.6; }
.message.user .message-body { background: var(--user-bubble); color: var(--user-bubble-text); padding: 10px 16px; border-radius: var(--radius) var(--radius) 4px var(--radius); }
.message.assistant .message-body { background: var(--agent-bubble); color: var(--agent-bubble-text); padding: 10px 16px; border-radius: var(--radius) var(--radius) var(--radius) 4px; }

.thinking-block { margin-bottom: 8px; font-size: 0.85rem; color: var(--text-muted); }
.thinking-block summary { cursor: pointer; }
.thinking-text { display: block; padding: 8px; background: var(--thinking-bg); border-radius: var(--radius-sm); margin-top: 4px; white-space: pre-wrap; font-family: var(--font-mono); font-size: 0.8rem; }

.tool-pills { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 8px; }
.tool-pill { font-size: 0.8rem; padding: 3px 10px; border-radius: 12px; background: var(--bg-tertiary); color: var(--text-secondary); }
.tool-pill.running { background: rgba(88,166,255,0.15); color: var(--accent); }
.tool-pill.done { background: rgba(63,185,80,0.15); color: var(--success); }

.figure-wrapper { margin: 12px 0; text-align: center; }
.chat-figure { max-width: 100%; border-radius: var(--radius); border: 1px solid var(--border); }
.figure-label { display: block; font-size: 0.8rem; color: var(--text-muted); margin-top: 4px; }

.error-block { background: rgba(248,81,73,0.1); border: 1px solid var(--error); border-radius: var(--radius-sm); padding: 10px 14px; color: var(--error); font-size: 0.9rem; margin: 8px 0; }

.status-bar { display: flex; align-items: center; gap: 10px; padding: 8px 20px; border-top: 1px solid var(--border); background: var(--bg-secondary); }
.typing-indicator { display: flex; gap: 4px; }
.typing-indicator span { width: 6px; height: 6px; background: var(--text-muted); border-radius: 50%; animation: blink 1.4s infinite; }
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
@keyframes blink { 0%, 80%, 100% { opacity: 0.3; } 40% { opacity: 1; } }

.input-bar { display: flex; align-items: flex-end; gap: 8px; padding: 12px 20px; border-top: 1px solid var(--border); background: var(--bg-primary); }
.input-bar textarea { flex: 1; resize: none; border: 1px solid var(--border); border-radius: var(--radius); padding: 10px 14px; font-family: var(--font-sans); font-size: 0.95rem; background: var(--bg-input); color: var(--text-primary); outline: none; max-height: 160px; transition: border-color var(--transition); }
.input-bar textarea:focus { border-color: var(--accent); }
.send-btn { background: var(--accent); border: none; border-radius: var(--radius-sm); padding: 10px; cursor: pointer; color: white; display: flex; align-items: center; justify-content: center; transition: background var(--transition), opacity var(--transition); }
.send-btn:hover { background: var(--accent-hover); }
.send-btn:disabled { opacity: 0.4; cursor: not-allowed; }

.md-content h1, .md-content h2, .md-content h3 { margin-top: 16px; margin-bottom: 8px; }
.md-content p { margin-bottom: 8px; }
.md-content pre { background: var(--bg-tertiary); border-radius: var(--radius-sm); padding: 12px; overflow-x: auto; margin: 8px 0; }
.md-content code { font-family: var(--font-mono); font-size: 0.9em; }
.md-content :not(pre) > code { background: var(--bg-tertiary); padding: 2px 6px; border-radius: 4px; }
.md-content table { border-collapse: collapse; margin: 8px 0; width: 100%; }
.md-content th, .md-content td { border: 1px solid var(--border); padding: 6px 10px; text-align: left; }
.md-content th { background: var(--bg-tertiary); }
.md-content ul, .md-content ol { padding-left: 24px; margin-bottom: 8px; }
.md-content blockquote { border-left: 3px solid var(--accent); padding-left: 12px; color: var(--text-secondary); margin: 8px 0; }

@media (max-width: 768px) {
    .sidebar { position: absolute; z-index: 50; height: calc(100vh - var(--header-h)); transform: translateX(calc(-1 * var(--sidebar-w))); }
    .sidebar:not(.collapsed) { transform: translateX(0); }
    .tagline { display: none; }
}
